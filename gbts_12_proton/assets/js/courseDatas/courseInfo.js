/**
 * 
 * 
 * 课程左侧公告信息栏
 * 
 */
var course = {

    infoList: [
        {
            icon: 'el-icon-bell',
            title: '公告',
            children: [
                {
                    title: '课程介绍',
                    href: 'courseNotice.html'
                }
            ],
        },
        {
            icon: 'el-icon-reading',
            title: '课件',
            children: [
                {
                    title: '课件',
                    href: 'courseware.html'
                }
            ],
        },
        {
            icon: 'el-icon-edit',
            title: '测试与作业',
            children: [
                {
                    title: '作业',
                    href: 'workAndTest.html'
                },
                {
                    title: '测试',
                    href: 'workAndTest.html'
                }
            ],
        },
        {
            icon: 'el-icon-eleme',
            title: '考试',
            children: [
                {
                    title: '考试',
                    href: 'courseNotice.html'
                }
            ],
        },
        {
            icon: 'el-icon-chat-dot-square',
            title: '讨论区',
            children: [
                {
                    title: '讨论区',
                    href: ''
                }
            ],
        },
        {
            icon: 'el-icon-medal',
            title: '评价',
            children: [
                {
                    title: '评价',
                    href: ''
                }
            ],
        },
    ],
    courseOutline: [
        {
            name: '第一单元',
            isComplete: false,
            children: [
                {
                    name: '第一节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第二节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第三节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第四节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                }
            ]
        },
        {
            name: '第二单元',
            isComplete: false,
            children: [
                {
                    name: '第一节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第二节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第三节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第四节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                }
            ]
        },
        {
            name: '第三单元',
            isComplete: false,
            children: [
                {
                    name: '第一节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第二节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第三节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第四节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                }
            ]
        },
        {
            name: '第四单元',
            isComplete: false,
            children: [
                {
                    name: '第一节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第二节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第三节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第四节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                }
            ]
        },
        {
            name: '第五单元',
            isComplete: false,
            children: [
                {
                    name: '第一节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第二节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第三节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                },
                {
                    name: '第四节',
                    isComplete: false,
                    link: {
                        video: '',
                        txt: '',
                        pdf: '',
                        word: ''
                    }
                }
            ]
        }
    ]
}


var userOptions = {
    order: [
        {
            title: '查看进度',
            icon: 'el-icon-collection',
            href: '#'
        },
        {
            title: '课内消息',
            icon: 'el-icon-chat-dot-round',
            href: '#'
        },
        {
            title: '退出课堂',
            icon: 'el-icon-back',
            href: 'lookUpCourse.html'
        }
    ]
}
var danxuan = [
    {
        title : '那艘if阿富豪我好是欧式花是你OA深？',
        options:['12','17','13','20']
    },
    {
        title : '部分可微波古尔沟我顾伟UI我还？',
        options:['14','10','13','22']
    },
    {
        title : '放水后is后我换个问过我无比股市公司规划升级版素',
        options:['24','12','45','74']
    },
    {
        title : '放水后is后我换个问过我无比股市公司规划升级版素',
        options:['24','12','45','74']
    },
    {
        title : '放水后is后我换个问过我无比股市公司规划升级版素',
        options:['24','12','45','74']
    },
    {
        title : '放水后is后我换个问过我无比股市公司规划升级版素',
        options:['24','12','45','74']
    },
    {
        title : '放水后is后我换个问过我无比股市公司规划升级版素',
        options:['24','12','45','74']
    },
    {
        title : '放水后is后我换个问过我无比股市公司规划升级版素',
        options:['24','12','45','74']
    }
];
var duoxuan = [
    {
        title : '阿Ivan哦我AV你哦是AV噶大V11成本法牛初步',
        options : ['1','2','3','4','5']
    }
];
var tiankong = [
    {
        title : '中国的直辖市有那个_______',
        input : ''
    },
    {
        title : '你的_______是核心',
        input : ''
    }
];
var zhuguan = [
    {
        title : '你的感想是什么？',
        input : ''
    }
];
//请求得到
var answer = [
    {
        type : 'dx',
        value : [1,1,2,2,3,3,4,4],
        score : 5
    },
    {
        type : 'sx',
        value : [['1','2']],
        score : 10
    },
    {
        type : 'tk',
        value : ['123456','654321'],
        score : 10
    },
    {
        type : 'zg',
        value : ['123456'],
        score : 30
    }
];
danxuan.forEach((item)=>{
    item.select = 'default';
    item.type = -1;
});
duoxuan.forEach((item)=>{
    item.select = [];
    item.type = -1;
});
tiankong.forEach((item)=>{
    item.type = -1;
});
zhuguan.forEach((item)=>{
    item.type = -1;
});
var app = new Vue({
    el: '#app',
    data: {
        user: 'XXX',
        course: course,
        userOptions: userOptions,
        name: window.localStorage.getItem('courseName'),
        activeNames : ['1'],
        test : [
           {  title : '第一章测试',works : [{title:'作业一',start:'2019-8-7',end:'2019-12-7',info:'其他',state :-1,score:0},{title:'作业二',start:'2019-8-7',end:'2019-12-7',info:'其他',state :1,score:10}]},
           { title : '第二章测试',works : [{title:'作业一',start:'2019-8-7',end:'2019-12-7',info:'其他',state :0,score:0}]}
        ],
        radio : '1',
        danxuan : danxuan,
        duoxuan : duoxuan,
        tiankong : tiankong,
        zhuguan : zhuguan,
        answer : answer,
        disabled : false,
        time : '00:00:10'
    },
    methods: {
        handleOpen(key, keyPath) {
            console.log(key, keyPath);
        },
        handleClose(key, keyPath) {
            console.log(key, keyPath);
        },
        handleChange(val){

        },
        computedScore(){
            var score = 0;
            var tkMistake = 0;
            var dxMistake = 0;
            var zgMistake = 0;
            var sxMistake = 0;
            this.answer.forEach((item)=>{
                if(item.type=='dx'){
                    for (let index = 0; index < this.danxuan.length; index++) {

                        if(app.danxuan[index].select==item.value[index]){
                            score += item.score;
                            console.log( "d YES");
                        }
                        else{
                            dxMistake++;
                            app.danxuan[index].type = 1;
                        }
                    }
                }
                else if(item.type=='sx'){
                    for (let index = 0; index < this.duoxuan.length; index++) {
                        if(app.duoxuan[index].select.toString()==item.value[index].toString()){
                            score += item.score;
                            console.log( "s YES");
                        }
                        else{
                            sxMistake++;
                            app.duoxuan[index].type = 1;
                        }
                    }
                }
                else if(item.type=='tk'){
                    for (let index = 0; index < this.tiankong.length; index++) {
                        if(app.tiankong[index].input.trim()==item.value[index]){
                            score += item.score;
                            console.log("t YES");
                        }
                        else{
                            tkMistake++;
                            app.tiankong[index].type = 1;
                        }
                    }
                }
                else{
                    for (let index = 0; index < this.zhuguan.length; index++) {
                        if(app.zhuguan[index].input.trim()==item.value[index]){
                            score += item.score;
                            console.log("z YES");
                        }
                        else{
                            zgMistake++;
                            app.zhuguan[index].type = 1;
                        }
                    }
                }
            });

            app.disabled = true;

            this.$notify({
                title: '提示',
                message:  '选择题错误个数: '+(dxMistake+sxMistake)+'  填空题错误个数: '+tkMistake+' 主观题错误个数: '+zgMistake+'  最后得分:'+score,
                duration: 0
            });
        },
        write_work(work){
            window.location.href = "workShow.html";
            console.log(JSON.stringify(work))
        },
        edit_work(work){
            console.log(JSON.stringify(work));
        }
    },
    computed: {
        write : function(){
            let i = 0;
            this.danxuan.forEach((item)=>{
                if(item.select!='default'){
                    item.type = 0;
                    i++;
                }
                else{
                    item.type = -1;
                }
            });
            this.duoxuan.forEach((item)=>{
                if(item.select.length!=0){
                    item.type = 0;                                                                                                                                                                                                                                                                                   
                    i++;
                }
                else{
                    item.type = -1;
                }
            });
            this.tiankong.forEach((item)=>{
                if(item.input.length>0){
                    item.type = 0;
                    i++;
                }
                else{
                    item.type = -1;
                }
            });
            this.zhuguan.forEach((item)=>{
                if(item.input.length>0){
                    item.type = 0;
                    i++;
                }
                else{
                    item.type = -1;
                }
            });
            return "完成度:"+i+"/"+(this.danxuan.length+this.tiankong.length+this.duoxuan.length+this.zhuguan.length);
        },
        countDown : function(){
           

        }
    },
});


var time = app.time;
var hh =   parseInt(time.split(':')[0]);
var mm =   parseInt(time.split(':')[1]);
var ss =   parseInt(time.split(':')[2]);
var timer = setInterval(() => {
    var hh =   parseInt(time.split(':')[0]);
    var mm =   parseInt(time.split(':')[1]);
    var ss =   parseInt(time.split(':')[2]);
    if(ss>0){
        ss-=1;
    }
    else{
        if(mm>0){
            ss = 59;
            mm -= 1;
            
        }
        else{
            if(hh>0){
                ss = 59;
                mm = 59;
                hh -= 1;
            }
        }
    }
    if(mm<10){
        mm = '0'+mm;
    }
    if(ss<10){
        ss = '0'+ss;
    }
    if(hh<10){
        hh = '0'+hh;
    }
    app.time = hh+':'+mm+':'+ss;
    time =  app.time;
    console.log(time);
    if(hh==0&&mm==0&&ss==0){
        app.time = '- -:- -:- -';
        clearInterval(timer);
        app.disabled = true;
    }
}, 1000);



